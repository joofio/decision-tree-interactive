<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <title> Árvore de decisão</title>
    <link rel="stylesheet" href="treant-js-master/Treant.css">
    <link rel="stylesheet" href="collapsable.css">
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>

    <link rel="stylesheet" href="treant-js-master/perfect-scrollbar/perfect-scrollbar.css">

</head>
<body>
    <div  id="collapsable-example"></div>
    <script src="treant-js-master/vendor/raphael.js"></script>
    <script src="treant-js-master/Treant.js"></script>
    
    <script src="treant-js-master/vendor/jquery.min.js"></script>
    <script src="treant-js-master/vendor/jquery.easing.js"></script>
    
    
    <script src="decisiontree-1.js"></script>
    <script>
        tree = new Treant( chart_config );
    </script>
    <div>
        <p><b>Caminho:</b> </p><p id="caminho"> </p>
         
         <p><b> Resultado:</b>  <div id="resultado"><py-script>

            from pyodide.ffi   import create_proxy
            from js import document, console

            data={"l3_1":"Período igual ou superior a 2 horas -> Nova Administração sem reacção"}

            def get_path(id,data=data):
                if data[id]:
                    return data[id]
                else:
                    return ""


            def check_final_node(*kwargs):
                p=document.getElementsByClassName('node')
                console.log(p)
                final_node_count=0
                for i in p:
                    if i.style.visibility=='visible':
                        if "final-node" in i.className:
                            final_node_count+=1
                            console.log(i.id)
                        #    console.log(i.class)
                            console.log(i.textContent)
                            text_result=i.textContent
                            id_to_get=i.id

                print(final_node_count)

                if final_node_count==1:
                    Element('resultado').write(text_result)
                    Element('caminho').write( get_path(id_to_get))
                    
                else:
                    Element('resultado').write("")
                    Element('caminho').write( '')




            # Create a Python proxy for the callback function
            # process_file() is your function to process events from FileReader
            visibility_event = create_proxy(check_final_node)
            console.log("aqui aqui")
            # Set the listener to the callback
            check_final_node()
            document.getElementById("collapsable-example").addEventListener("mouseover", visibility_event)

          </py-script></div></p>
        <button id="btn2">Avançar</button>
    </div>
</body>
</html>


